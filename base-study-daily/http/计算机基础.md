##### 进程 VS 线程

>- 进程
>
>**进程是一个具有一定独立功能的程序在一个数据集上的一次动态执行的过程，**是操作系统进行资源分配和调度的一个独立单位，是应用程序运行的载体。**进程是任务调度的最小单位，每个进程有各自独立的一块内存，使得各个进程之间内存地址相互隔离。**
>
>进程具有的特征：
>
>动态性：进程是程序的一次执行过程，是临时的，有生命期的，是动态产生，动态消亡的；
>
>并发性：任何进程都可以同其他进行一起并发执行；
>
>独立性：进程是系统进行资源分配和调度的一个独立单位；
>
>结构性：进程由程序，数据和进程控制块三部分组成
>
>- 线程
>
>**线程是程序执行中一个单一的顺序控制流程，是程序执行流的最小单元，是处理器调度和分派的基本单位**一个进程可以有一个或多个线程，各个线程之间共享程序的内存空间(也就是所在进程的内存空间)。一个标准的线程由线程ID，当前指令指针PC，寄存器和堆栈组成。而进程由内存空间(代码，数据，进程空间，打开的文件)和一个或多个线程组成.
>
>- 抽象对比
>
>  **单CPU**：一台单核处理器计算机 = 一个车间；
>  **多CPU**：一台多核处理器计算机 = 一座工厂；
>
>  **进程**：一个车间 = 一个进程； （即一个运行的程序）
>  **多进程**：一座工厂可以同时运行多个车间；
>  **CPU和进程**：单CPU只能同时运行单个进程，多CPU可以同时运行多个进程。
>
>  **线程**：车间内一个工人 = 一个线程；
>  **进程与线程**：一个进程可以包括多个线程。
>
>  **线程间内存共享**：车间的空间是工人们共享的，比如许多房间是每个工人都可以进出的。一个进程的内存空间是共享的，每个线程都可以使用这些共享内存。
>
>  **内存安全**：可是，每个车间容纳大小不同，有的最多只能容纳一个人。车间人满的时候，其他人就进不去了。一个线程使用某些共享内存时，其他线程必须等它结束，才能使用这一块内存。
>
>  **互斥锁**：一个防止他人进入的简单方法，就是门口加一把锁。先到的人锁上门，后到的人看到上锁，就在门口排队，等锁打开再进去。这就叫"互斥锁"–Mutex，防止两个线程同时读写某一块内存区域。
>
>  **信号量**：这时的解决方法，就是在门口挂n把钥匙。进去的人就取一把钥匙，出来时再把钥匙挂回原处。后到的人发现钥匙架空了，就知道必须在门口排队等着了。这叫做"信号量"（Semaphore），用来保证多个线程不会互相冲突。
>
>  **锁和信号量**：不难看出，互斥锁是信号量的一种特殊情况（n=1时）。也就是说，完全可以用后者替代前者。但是，因为mutex较为简单，且效率高，所以在必须保证资源独占的情况下，还是采用这种设计
>
>  **操作系统的资源分配与调度逻辑**
>
>  ​    以多进程形式，允许多个任务同时运行；
>  ​    以多线程形式，允许单个任务分成不同的部分运行；
>  ​    提供协调机制，一方面防止进程之间和线程之间产生冲突，另一方面允许进程之间和线程之间共享资源。
>
>- 进程和线程的区别
>
>  **根本区别**：进程是操作系统资源分配的基本单位，而线程是任务调度和执行的基本单位
>
>  **开销方面**：每个进程都有独立的代码和数据空间（程序上下文），**进程之间切换开销大**；线程可以看做轻量级的进程，同一类线程共享代码和数据空间，每个线程都有自己独立的运行栈和程序计数器（PC），**线程之间切换的开销小**
>
>  **所处环境**：在操作系统中能同时运行多个进程（程序）；而在同一个进程（程序）中有多个线程同时执行（通过CPU调度，在每个时间片中只有一个线程执行）
>
>  **内存分配**：系统为每个进程分配不同的内存空间；而对线程而言，除了CPU外，系统不会为线程分配内存（线程所使用的资源来自其所属进程的资源），线程组之间只能共享资源
>
>  **包含关系**：线程是进程的一部分，所以线程也被称为轻权进程或者轻量级进程
>
>- 同一进程中的多个线程，哪些资源是共享的，哪些是独有的？
>
>  一个进程的（虚）地址空间大小为4G，分为系统（内核）空间和用户空间两部分，系统空间为所有进程共享，而用户空间是独立的，一般WINDOWS进程的用户空间为2G。
>
>  一个进程中的所有线程共享该进程的地址空间，但它们有各自独立的（/私有的）栈(stack)
>
>  堆：是大家共有的空间，分全局堆和局部堆。全局堆就是所有没有分配的空间，局部堆就是用户分配的空间。堆在操作系统对进程初始化的时候分配，运行过程中也可以向系统要额外的堆，但是记得用完了要还给操作系统，要不然就是内存泄漏。（地址空间、全局变量、打开的文件、子进程、信号信号服务程序）
>
>  栈：是个线程独有的，保存其运行状态和局部自动变量的。栈在线程开始的时候初始化，每个线程的栈互相独立，因此，栈是　thread safe的。操作系统在切换线程的时候会自动的切换栈，就是切换　ＳＳ／ＥＳＰ寄存器。栈空间不需要在高级语言里面显式的分配和释放。(线程Id、线程的堆栈、寄存器)
>
>  Java内存分为两类:栈内存，堆内存。栈内存是指程序进入一个方法时，会为这个方法单独分配一块私属存储空间，用于存储这个方法内部的局部变量，当这个方法结束时，分配给这个方法的栈会释放，这个栈中的变量也将随之释放。
>
>  堆是与栈作用不同的内存，一般用于存放不放在当前方法栈中的那些数据，例如，使用new创建的对象都放在堆里，所以，它不会随方法的结束而消失。方法中的局部变量使用final修饰后，放在堆中，而不是栈中
>
>  1.heap是堆，stack是栈。
>
>  2.stack的空间由操作系统自动分配和释放，heap的空间是手动申请和释放的，heap常用new关键字来分配。
>
>  3.stack空间有限，heap的空间是很大的自由区。
>
>  在Java中，
>
>  若只是声明一个对象，则先在栈内存中为其分配地址空间，Object a =null; 只在栈内存中分配空间
>
>  若再new一下，实例化它，则在堆内存中为其分配地址 :Object b =new Object()
>
>- 常见的IPC(InterProcess Communication)进程间的通信方式。同一个机器上进程通信
>
>  主要包括： **管道，系统IPC ( 包括消息队列，信号量，共享存储 )，SOCKET**
>
>  - 管道：
>
>  普通管道 PIPE：通常有种限制，一是半双工，只能单向传输；二是只能在父子进程间使用。
>  流管道  s_pipe：去除了第一种限制，可以双向传输。
>
>  命名管道 name_pipe：去除了第二种限制，可以在许多并不相关的进程之间进行通讯。
>
>  - 系统IPC:
>
>    - 信号量( semophore ) ： 信号量是一个计数器，可以用来控制多个进程对共享资源的访问。它常作为一种锁机制，防止某进程正在访问共享资源时，其他进程也访问该资源。因此，主要作为进程间以及同一进程内不同线程之间的同步手段。消息队列( message queue ) ： 消息队列是由消息的链表，存放在内核中并由消息队列标识符标识。消息队列克服了信号传递信息少、管道只能承载无格式字节流以及缓冲区大小受限等缺点。
>
>    - 信号 ( sinal ) ： 信号是一种比较复杂的通信方式，用于通知接收进程某个事件已经发生。
>
>    - 共享内存( shared memory ) ：共享内存就是映射一段能被其他进程所访问的内存，这段共享内存由一个进程创建，但多个进程都可以访问。共享内存是最快的 IPC 方式，它是针对其他进程间通信方式运行效率低而专门设计的。它往往与其他通信机制，如信号两，配合使用，来实现进程间的同步和通信。
>
>  - 套接字( socket ) ： 套解口也是一种进程间通信机制，与其他通信机制不同的是，它可用于不同及其间的进程通信
>
>- RPC(不同机器上的两个进程通信)
>
>  RPC:(Remote Procedure Call Protocol）远程过程调用协议.RPC 是指远程过程调用，是一种进程间的通信方式，它是一种技术思想，而不是规范。它允许程序调用另一个地址空间的过程和函数，而不用[程序员](https://link.zhihu.com/?target=http%3A//msd.misuland.com/pd/3643782633961294032)显示编码这个远程调用的细节。无论是本地调用还是远程调用，本质上编写的调用代码基本相同。
>
>  1. 远程数据共享（例如：共享远程文件，共享数据库等实现不同系统通信）
>
>  2. 消息队列
>
>  3. RPC（远程过程调用）
>
>- 线程之间的通信
>
>  **主要包括：全局变量、Message消息机制、互斥锁、信号量**
>
>  - 全局 变量：
>
>    进程中的线程间内存共享，这是比较常用的通信方式和交互方式。注：定义全局变量时最好使用volatile来定义，以防编译器对此变量进行优化
>
>  - Message消息机制
>
>    常用的Message通信的接口主要有两个：PostMessage和PostThreadMessage
>
>    PostMessage为线程向主窗口发送消息。而PostThreadMessage是任意两个线程之间的通信接口
>
>  - CEvent对象
>
>    CEvent为MFC中的一个对象，可以通过对CEvent的触发状态进行改变，从而实现线程间的通信和同步

##### 



##### 网络协议、网络分层

>- OSI七层模型从上到下依次是：
>
>应用层：为应用程序提供网络服务；文件传输；                  TFTP、HTTP、SNMP、FTP、SMTP、DNS
>
>表示层：数据格式转换、数据压缩和数据加密；                  没有协议
>
>会话层：建立、断开、维护通信链接；                               没有协议
>
>----------------应用层
>
>传输层： 为上层协议提供端到端的可靠传输；                    UDP、TCP
>
>网络层： 控制子网的运行，如逻辑编址，分组传输，路由选择最小单位分组（包）报文；                                                   IP、ARP、ICMP、RTP、OSPF、BGP
>
>数据链路层：定义通过通信媒介互连的设备之间传输规范；   SLIP、CSLIP、PPP、ARP
>
>物理层： 利用物理传输介质为数据链路层提供物理链接         ISO2110、IEEE802、 IEEE802.2
>
>- TCP五层模型相比OSI七层模型，将OSI的应用层、表示层和会话层合为一层：应用层，其他不变
>- IP协议（网络层）的作用
>- 把各种数据包传送给对方。而要保证确实传送到对方那里，则需要满足各类条件。其中两个重要的条件是 IP 地址和 MAC地址（Media Access Control Address）
>- IP 地址指明了节点被分配到的地址，MAC 地址是指网卡所属的固定地址。IP 地址可以和 MAC 地址进行配对。IP 地址可变换，但 MAC地址基本上不会更改
>
>使用 ARP 协议凭借 MAC 地址进行通信，IP 间的通信依赖 MAC地址。在网络上，通信的双方在同一局域网（LAN）内的情况是很少的，通常是经过多台计算机和网络设备中转才能连接到对方。而在进行中转时，会利用下一站中转设备的MAC地址来搜索下一个中转目标。这时，会采用 ARP 协议（AddressResolution Protocol）。ARP是一种用以解析地址的协议，根据通信方的 IP 地址就可以反查出对应的 MAC 地址

##### 网络层的作用

>他解决的是寻址和优化传输路径的问题。
>
>网络层的目的是实现两个[端系统](https://baike.baidu.com/item/端系统)之间的数据透明传送，具体功能包括[寻址](https://baike.baidu.com/item/寻址)和[路由选择](https://baike.baidu.com/item/路由选择)、连接的建立、保持和终止等。它提供的服务使[传输层](https://baike.baidu.com/item/传输层)不需要了解网络中的数据传输和[交换技术](https://baike.baidu.com/item/交换技术)。
>
>网络层主要是为传输层提供服务，为了向传输层提供服务，则网络层必须要使用数据链路层提供的服务。而数据链路层的主要作用是负责解决两个直接相邻节点之间的通信，但并不负责解决数据经过通信子网中多个转接节点时的通信问题，因此，为了实现两个端系统之间的数据透明传送，让源端的数据能够以最佳路径透明地通过通信子网中的多个转接节点到达目的端，使得传输层不必关心网络的拓扑构型以及所使用的通信介质和交换技术
>
>网络层功能：
>
>分组与分组交换：把从传输层接收到的数据报文封装成分组（Packet，也称为“包”）再向下传送到数据链路层。
>
>路由：通过路由选择算法为分组通过通信子网选择最适当的路径。
>
>网络连接复用：为分组在通信子网中节点之间的传输创建逻辑链路，在一条数据链路上复用多条网络连接（多采取时分复用技术）。
>
>差错检测与恢复：一般用分组中的头部校验和进行差错校验，使用确认和重传机制来进行差错恢复。
>
>服务选择：网络层可为传输层提供数据报和虚电路两种服务，但 Internet的网络层仅为传输层提供数据报一种服务。
>
>网络管理：管理网络中的数据通信过程，将数据设法从源端经过若干个中间节点传送到目的端，为传输层提供最基本的端到端的数据传送服务。
>
>流量控制：通过流量整形技术来实现流量控制，以防止通信量过大造成通信子网的性能下降。
>
>拥塞控制：当网络的数据流量超过额定容量时，将会引发网络拥塞，致使网络的吞吐能力急剧下降。因此需要采用适当的控制措施来进行疏导。
>
>网络互连：把一个网络与另一个网络互相连接起来，在用户之间实现跨网络的通信。
>
>分片与重组：如果要发送的分组超过了协议数据单元允许的长度，则源节点的网络层就要对该分组进行分片，分片到达目的主机之后,有目的节点的网络层再重新组装成原分组。

##### 传输层的作用

>定义一些传输数据的协议和端口。传输协议同时进行流量控制，或是根据接收方接收数据的快慢程度，规定适当的发送速率，解决传输效率及能力的问题

##### ping 和 traceroute 实现原理，使用的协议（ICMP）

>PING （Packet Internet Groper），因特网包探索器，用于测试网络连接量的程序。
>
>Tracert（tracerout）是路由跟踪实用程序，用于确定 IP 数据包访问目标所采取的路径。
>
>ping和tracert(traceroute)是ICMP 的典型实现
>
>ICMP（Internet Control Message Protocol）Internet控制[报文](https://baike.baidu.com/item/报文/3164352)协议。它是[TCP/IP协议簇](https://baike.baidu.com/item/TCP%2FIP协议簇)的一个子协议，用于在IP[主机](https://baike.baidu.com/item/主机/455151)、[路由](https://baike.baidu.com/item/路由)器之间传递控制消息。控制消息是指[网络通](https://baike.baidu.com/item/网络通)不通、[主机](https://baike.baidu.com/item/主机/455151)是否可达、[路由](https://baike.baidu.com/item/路由/363497)是否可用等网络本身的消息。这些控制消息虽然并不传输用户数据，但是对于用户数据的传递起着重要的作用。
>
>ICMP协议是一种面向无连接的协议，用于传输出错报告控制信息。它是一个非常重要的协议，它对于[网络安全](https://baike.baidu.com/item/网络安全)具有极其重要的意义。 [3]  它属于[网络层协议](https://baike.baidu.com/item/网络层协议)，主要用于在主机与路由器之间传递控制信息，包括报告错误、交换受限控制和状态信息等。当遇到IP数据无法访问目标、IP[路由器](https://baike.baidu.com/item/路由器)无法按当前的传输速率转发[数据包](https://baike.baidu.com/item/数据包)等情况时，会自动发送ICMP消息

##### HTTP 协议

>应用层协议：负责提供数据接口标准，提供的服务包括文件的传输，文件的管理以及电子邮件的信息处理

##### HTTPS 的功能

##### 对称加密、非对称加密、数字证书

##### HTTP2 新特性

##### WebSocket 优点

##### 利用计算机网络知识，描述一次 HTTP 请求涉及到的协议和服务？

##### 开放性的讨论，DNS、HTTP、CDN、ARP、IP、MAC、路由器 & 交换机寻址等